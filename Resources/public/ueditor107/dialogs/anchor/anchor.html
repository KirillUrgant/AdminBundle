<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="ru"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8" lang="ru"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="ru"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8"/>
    <script type="text/javascript" src="../../third-party/jquery-2.2.3.js"></script>
    <script type="text/javascript" src="../internal.js"></script>
    <link rel="stylesheet" href="../internal.css">
</head>
<body>
    <style type="text/css">
    * {
        color: #838383;
        margin: 0;
        padding: 0
    }

    html, body {
        font-size: 12px;
        overflow: hidden;
    }

    .content {
        padding: 5px 0 0 15px;
    }

    input {
        width: 210px;
        height: 21px;
        line-height: 21px;
        margin-left: 4px;
    }
</style>
<div class="content">
    <span><var id="lang_input_anchorName"></var></span><input id="anchorName" value=""/>
</div>
<script type="text/javascript" src="../internal.js"></script>
<script type="text/javascript">
    var anchorInput = $G('anchorName'),
        node = editor.selection.getRange().getClosedNode();
    if (node && node.tagName == 'IMG' && (node = node.getAttribute('anchorname'))) {
        anchorInput.value = node;
    }
    anchorInput.onkeydown = function (evt) {
        evt = evt || window.event;
        if (evt.keyCode == 13) {
            editor.execCommand('anchor', anchorInput.value);
            dialog.close();
            domUtils.preventDefault(evt)
        }
    };
    dialog.onok = function () {
        editor.execCommand('anchor', anchorInput.value);
        dialog.close();
    };
    $focus(anchorInput);
</script>
</body>
</html>